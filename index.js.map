{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. ПРОВЕРКА И ЗАПУСК LENIS ---\n    let lenis;\n    \n    // Проверяем, загрузилась ли библиотека\n    if (typeof Lenis !== 'undefined') {\n        lenis = new Lenis({\n            duration: 1.2,\n            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n            direction: 'vertical',\n            smooth: true,\n        });\n\n        // Функция анимации\n        function raf(time) {\n            lenis.raf(time);\n            requestAnimationFrame(raf);\n        }\n        requestAnimationFrame(raf);\n        \n        console.log(\"Lenis Smooth Scroll: Active\");\n    } else {\n        console.warn(\"Lenis library not loaded. Using native scroll.\");\n        // Если библиотеки нет, просто добавляем стиль для плавности CSS\n        document.documentElement.style.scrollBehavior = \"smooth\";\n    }\n\n    // --- 2. РЕГИСТРАЦИЯ GSAP (с проверкой) ---\n    if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {\n        gsap.registerPlugin(ScrollTrigger);\n    }\n\n    // --- 3. МОБИЛЬНОЕ МЕНЮ ---\n    const burger = document.querySelector('.header__burger');\n    const nav = document.querySelector('.header__nav');\n    const menuLinks = document.querySelectorAll('.header__link');\n    const body = document.body;\n\n    if (burger && nav) {\n        burger.addEventListener('click', () => {\n            burger.classList.toggle('is-active');\n            nav.classList.toggle('is-active');\n            \n            // Если Lenis работает, останавливаем его, если нет — блокируем body\n            const isMenuOpen = nav.classList.contains('is-active');\n            \n            if (isMenuOpen) {\n                if (lenis) lenis.stop();\n                body.style.overflow = 'hidden';\n            } else {\n                if (lenis) lenis.start();\n                body.style.overflow = '';\n            }\n        });\n\n        menuLinks.forEach(link => {\n            link.addEventListener('click', () => {\n                burger.classList.remove('is-active');\n                nav.classList.remove('is-active');\n                body.style.overflow = '';\n                if (lenis) lenis.start();\n            });\n        });\n    }\n\n    // --- 4. HEADER AUTO-HIDE (Только если Lenis активен) ---\n    const header = document.querySelector('.header');\n    let lastScroll = 0;\n\n    if (lenis && header) {\n        lenis.on('scroll', ({ scroll }) => {\n            if (scroll > lastScroll && scroll > 100) {\n                header.style.transform = 'translateY(-100%)';\n            } else {\n                header.style.transform = 'translateY(0)';\n            }\n            lastScroll = scroll;\n        });\n    } else {\n        // Фоллбэк для обычного скролла\n        window.addEventListener('scroll', () => {\n            const currentScroll = window.scrollY;\n            if (currentScroll > lastScroll && currentScroll > 100) {\n                header.style.transform = 'translateY(-100%)';\n            } else {\n                header.style.transform = 'translateY(0)';\n            }\n            lastScroll = currentScroll;\n        });\n    }\n\n    // --- 5. АНИМАЦИИ (HERO) ---\n    if (typeof gsap !== 'undefined') {\n        // Если подключен SplitType\n        if (typeof SplitType !== 'undefined') {\n            const typeSplit = new SplitType('.reveal-type', { types: 'lines, words' });\n            gsap.from(typeSplit.words, {\n                y: '100%',\n                opacity: 0,\n                duration: 0.8,\n                stagger: 0.05,\n                ease: 'power2.out',\n                delay: 0.2\n            });\n        }\n\n        gsap.from('.hero__bottom', {\n            y: 20,\n            opacity: 0,\n            duration: 1,\n            delay: 0.8,\n            ease: 'power2.out'\n        });\n\n        // Анимация секций\n        const sections = document.querySelectorAll('.section-padding');\n        sections.forEach(section => {\n            // Проверка на наличие детей\n            if(section.children.length > 0) {\n                gsap.from(section.children, {\n                    scrollTrigger: {\n                        trigger: section,\n                        start: 'top 80%',\n                    },\n                    y: 30,\n                    opacity: 0,\n                    duration: 0.8,\n                    stagger: 0.2,\n                    ease: 'power2.out'\n                });\n            }\n        });\n    }\n\n    // --- 6. ФОРМА ---\n    const form = document.getElementById('mainForm');\n    const captchaLabel = document.getElementById('captcha-math');\n    const captchaInput = document.getElementById('captcha');\n    const msgBox = document.getElementById('formMessage');\n\n    let num1 = Math.floor(Math.random() * 10);\n    let num2 = Math.floor(Math.random() * 10);\n    \n    if (captchaLabel) {\n        captchaLabel.textContent = `${num1} + ${num2} = ?`;\n    }\n\n    if (form) {\n        form.addEventListener('submit', (e) => {\n            e.preventDefault();\n            \n            if (parseInt(captchaInput.value) !== (num1 + num2)) {\n                msgBox.textContent = \"Ошибка: неверный результат примера!\";\n                msgBox.className = \"form__message error\";\n                return;\n            }\n\n            const btn = form.querySelector('button');\n            const originalText = btn.textContent;\n            btn.textContent = \"Отправка...\";\n            btn.disabled = true;\n\n            setTimeout(() => {\n                btn.textContent = originalText;\n                btn.disabled = false;\n                msgBox.textContent = \"Спасибо! Заявка отправлена.\";\n                msgBox.className = \"form__message success\";\n                form.reset();\n                num1 = Math.floor(Math.random() * 10);\n                num2 = Math.floor(Math.random() * 10);\n                if(captchaLabel) captchaLabel.textContent = `${num1} + ${num2} = ?`;\n            }, 1500);\n        });\n    }\n\n    // --- 7. COOKIES ---\n    const cookiePopup = document.getElementById('cookiePopup');\n    const acceptBtn = document.getElementById('acceptCookies');\n\n    if (cookiePopup && !localStorage.getItem('cookiesAccepted')) {\n        setTimeout(() => {\n            cookiePopup.style.display = 'flex';\n        }, 2000);\n    }\n\n    if (acceptBtn) {\n        acceptBtn.addEventListener('click', () => {\n            localStorage.setItem('cookiesAccepted', 'true');\n            if(cookiePopup) cookiePopup.style.display = 'none';\n        });\n    }\n\n    // Иконки\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n});"],"names":["lenis","raf","time","t","burger","nav","menuLinks","body","link","header","lastScroll","scroll","currentScroll","typeSplit","section","form","captchaLabel","captchaInput","msgBox","num1","num2","e","btn","originalText","cookiePopup","acceptBtn"],"mappings":"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"}